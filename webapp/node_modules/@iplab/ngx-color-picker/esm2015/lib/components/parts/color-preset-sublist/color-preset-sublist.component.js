import { Component, Input, ChangeDetectionStrategy, Renderer2, Inject, ChangeDetectorRef, Output, EventEmitter, HostBinding } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { OpacityAnimation, ListAnimation } from './color-preset-sublist.animation';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '../color-preset/color-preset.component';
import * as ɵngcc2 from '@angular/common';
import * as ɵngcc3 from '../../../pipes/reverse.pipe';

function ColorPresetSublist_div_3_color_preset_1_Template(rf, ctx) { if (rf & 1) {
    const _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "color-preset", 5);
    ɵngcc0.ɵɵlistener("selectionChange", function ColorPresetSublist_div_3_color_preset_1_Template_color_preset_selectionChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(2); return ctx_r3.onSelectionChange($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const preset_r2 = ctx.$implicit;
    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("color", preset_r2)("activeColor", ctx_r1.activeColor);
} }
function ColorPresetSublist_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 3);
    ɵngcc0.ɵɵtemplate(1, ColorPresetSublist_div_3_color_preset_1_Template, 1, 2, "color-preset", 4);
    ɵngcc0.ɵɵpipe(2, "reverse");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("@opacityAnimation", ctx_r0.showChildren)("@listAnimation", ctx_r0.direction);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ɵngcc0.ɵɵpipeBind2(2, 3, ctx_r0.list, ctx_r0.direction == "up" || ctx_r0.direction == "right"));
} }
export class ColorPresetSublist {
    constructor(renderer, document, cdr) {
        this.renderer = renderer;
        this.document = document;
        this.cdr = cdr;
        this.selectionChange = new EventEmitter(false);
        this.direction = 'up';
        this.showChildren = false;
        this.hooks = [];
    }
    ngOnDestroy() {
        this.removeListeners();
        this.cdr.detach();
    }
    removeListeners() {
        this.hooks.forEach((callback) => callback());
        this.hooks.length = 0;
    }
    /**
     * emit color change
     */
    onSelectionChange(color) {
        this.selectionChange.next(color);
    }
    onLongPress() {
        this.showChildren = true;
        this.listenDocumentClick();
    }
    listenDocumentClick() {
        this.hooks.push(this.renderer.listen(this.document, 'mousedown', () => this.closeList()));
        this.hooks.push(this.renderer.listen(this.document, 'touchstart', () => this.closeList()));
    }
    closeList() {
        if (this.showChildren) {
            this.showChildren = false;
            this.cdr.markForCheck();
            this.removeListeners();
        }
    }
    get className() {
        return `direction-${this.direction}`;
    }
}
ColorPresetSublist.ɵfac = function ColorPresetSublist_Factory(t) { return new (t || ColorPresetSublist)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
ColorPresetSublist.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ColorPresetSublist, selectors: [["color-preset-sublist"]], hostVars: 1, hostBindings: function ColorPresetSublist_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵhostProperty("className", ctx.className);
    } }, inputs: { direction: "direction", list: "list", activeColor: "activeColor" }, outputs: { selectionChange: "selectionChange" }, decls: 4, vars: 8, consts: [[3, "show-depth-title", "color", "activeColor", "longPress", "selectionChange"], [1, "reflection"], ["class", "sublist", 4, "ngIf"], [1, "sublist"], [3, "color", "activeColor", "selectionChange", 4, "ngFor", "ngForOf"], [3, "color", "activeColor", "selectionChange"]], template: function ColorPresetSublist_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "color-preset", 0);
        ɵngcc0.ɵɵlistener("longPress", function ColorPresetSublist_Template_color_preset_longPress_0_listener() { return ctx.onLongPress(); })("selectionChange", function ColorPresetSublist_Template_color_preset_selectionChange_0_listener($event) { return ctx.onSelectionChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(1, "div", 1);
        ɵngcc0.ɵɵelement(2, "div", 1);
        ɵngcc0.ɵɵtemplate(3, ColorPresetSublist_div_3_Template, 3, 6, "div", 2);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("show-depth-title", ctx.list.length > 1)("color", ctx.list[0])("activeColor", ctx.activeColor);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵstyleProp("background-color", ctx.list[0].toRgbaString());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵstyleProp("background-color", ctx.list[0].toRgbaString());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showChildren);
    } }, directives: [ɵngcc1.ColorPresetComponent, ɵngcc2.NgIf, ɵngcc2.NgForOf], pipes: [ɵngcc3.ReversePipe], styles: ["[_nghost-%COMP%], [_nghost-%COMP%]     *{padding:0;margin:0;box-sizing:border-box}", "[_nghost-%COMP%]{position:relative;display:inline-block}color-preset[_ngcontent-%COMP%]{position:relative;z-index:3}.reflection[_ngcontent-%COMP%]{display:none;position:absolute;height:100%;width:100%;z-index:2;right:-2px;top:-2px;opacity:.5}.reflection[_ngcontent-%COMP%] + .reflection[_ngcontent-%COMP%]{opacity:.2;right:-4px;top:-4px;z-index:1}color-preset[_ngcontent-%COMP%]:hover + .reflection[_ngcontent-%COMP%], color-preset[_ngcontent-%COMP%]:hover + .reflection[_ngcontent-%COMP%] + .reflection[_ngcontent-%COMP%]{display:block}.sublist[_ngcontent-%COMP%]{position:absolute;bottom:-8px;left:-8px;right:-8px;background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 2px 4px rgba(0,0,0,.3);padding:8px 5px;text-align:center;z-index:1000}.sublist[_ngcontent-%COMP%]   color-preset[_ngcontent-%COMP%]{margin:8px 0 0}.sublist[_ngcontent-%COMP%]   color-preset[_ngcontent-%COMP%]:first-child{margin:0}.direction-down[_nghost-%COMP%]   .sublist[_ngcontent-%COMP%]{bottom:auto;top:-8px}"], data: { animation: [OpacityAnimation, ListAnimation] }, changeDetection: 0 });
ColorPresetSublist.ctorParameters = () => [
    { type: Renderer2 },
    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },
    { type: ChangeDetectorRef }
];
ColorPresetSublist.propDecorators = {
    list: [{ type: Input }],
    selectionChange: [{ type: Output }],
    direction: [{ type: Input }],
    activeColor: [{ type: Input }],
    className: [{ type: HostBinding, args: ['className',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ColorPresetSublist, [{
        type: Component,
        args: [{
                selector: `color-preset-sublist`,
                template: "<color-preset [show-depth-title]=\"list.length > 1\" [color]=\"list[0]\" [activeColor]=\"activeColor\" (longPress)=\"onLongPress()\" (selectionChange)=\"onSelectionChange($event)\"></color-preset>\r\n<div class=\"reflection\" [style.backgroundColor]=\"list[0].toRgbaString()\"></div>\r\n<div class=\"reflection\" [style.backgroundColor]=\"list[0].toRgbaString()\"></div>\r\n\r\n<div class=\"sublist\" *ngIf=\"showChildren\" [@opacityAnimation]=\"showChildren\" [@listAnimation]=\"direction\">\r\n    <color-preset \r\n        *ngFor=\"let preset of list | reverse : (direction == 'up' || direction == 'right')\"\r\n        [color]=\"preset\"\r\n        [activeColor]=\"activeColor\"\r\n        (selectionChange)=\"onSelectionChange($event)\"></color-preset>\r\n</div>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                animations: [OpacityAnimation, ListAnimation],
                styles: [":host,:host ::ng-deep *{padding:0;margin:0;box-sizing:border-box}", ":host{position:relative;display:inline-block}color-preset{position:relative;z-index:3}.reflection{display:none;position:absolute;height:100%;width:100%;z-index:2;right:-2px;top:-2px;opacity:.5}.reflection+.reflection{opacity:.2;right:-4px;top:-4px;z-index:1}color-preset:hover+.reflection,color-preset:hover+.reflection+.reflection{display:block}.sublist{position:absolute;bottom:-8px;left:-8px;right:-8px;background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 2px 4px rgba(0,0,0,.3);padding:8px 5px;text-align:center;z-index:1000}.sublist color-preset{margin:8px 0 0}.sublist color-preset:first-child{margin:0}:host(.direction-down) .sublist{bottom:auto;top:-8px}"]
            }]
    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: undefined, decorators: [{
                type: Inject,
                args: [DOCUMENT]
            }] }, { type: ɵngcc0.ChangeDetectorRef }]; }, { selectionChange: [{
            type: Output
        }], direction: [{
            type: Input
        }], className: [{
            type: HostBinding,
            args: ['className']
        }], list: [{
            type: Input
        }], activeColor: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3ItcHJlc2V0LXN1Ymxpc3QuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pcGxhYi9uZ3gtY29sb3ItcGlja2VyL3NyYy9saWIvY29tcG9uZW50cy9wYXJ0cy9jb2xvci1wcmVzZXQtc3VibGlzdC9jb2xvci1wcmVzZXQtc3VibGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILFNBQVMsRUFDVCxLQUFLLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxNQUFNLEVBRU4saUJBQWlCLEVBQ2pCLE1BQU0sRUFDTixZQUFZLEVBQ1osV0FBVyxFQUNkLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUzQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVluRixNQUFNLE9BQU8sa0JBQWtCO0FBQUcsSUFrQjlCLFlBQ3FCLFFBQW1CLEVBQ0QsUUFBUSxFQUMxQixHQUFzQjtBQUMvQyxRQUh5QixhQUFRLEdBQVIsUUFBUSxDQUFXO0FBQUMsUUFDRixhQUFRLEdBQVIsUUFBUSxDQUFBO0FBQUMsUUFDM0IsUUFBRyxHQUFILEdBQUcsQ0FBbUI7QUFBQyxRQWZyQyxvQkFBZSxHQUFHLElBQUksWUFBWSxDQUFRLEtBQUssQ0FBQyxDQUFDO0FBQzVELFFBRVcsY0FBUyxHQUFxQyxJQUFJLENBQUM7QUFDOUQsUUFJVyxpQkFBWSxHQUFZLEtBQUssQ0FBQztBQUN6QyxRQUNZLFVBQUssR0FBb0IsRUFBRSxDQUFDO0FBQ3hDLElBS0ksQ0FBQztBQUNMLElBQ1csV0FBVztBQUFLLFFBQ25CLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUMvQixRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7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QSxBQUFBLEFBQUEsQUFLQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQU1BLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUF4RUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBS0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBckJBLEFBQUEsQUEwQ0EsQUFBQSxBQUFBLEFBQUEsQUF2Q0EsQUFBQSxBQXFCQSxBQUFBLEFBR0EsQUFBQSxBQUdBLEFBQUEsQUFHQSxBQUFBLEFBZ0RBLEFBQUEsQUFBQSxBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIElucHV0LFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBJbmplY3QsXHJcbiAgICBPbkRlc3Ryb3ksXHJcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIE91dHB1dCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIEhvc3RCaW5kaW5nXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLy4uLy4uLy4uL2hlbHBlcnMvY29sb3IuY2xhc3MnO1xyXG5pbXBvcnQgeyBPcGFjaXR5QW5pbWF0aW9uLCBMaXN0QW5pbWF0aW9uIH0gZnJvbSAnLi9jb2xvci1wcmVzZXQtc3VibGlzdC5hbmltYXRpb24nO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogYGNvbG9yLXByZXNldC1zdWJsaXN0YCxcclxuICAgIHRlbXBsYXRlVXJsOiBgLi9jb2xvci1wcmVzZXQtc3VibGlzdC5jb21wb25lbnQuaHRtbGAsXHJcbiAgICBzdHlsZVVybHM6IFtcclxuICAgICAgICBgLi8uLi9iYXNlLnN0eWxlLnNjc3NgLFxyXG4gICAgICAgIGAuL2NvbG9yLXByZXNldC1zdWJsaXN0LmNvbXBvbmVudC5zY3NzYFxyXG4gICAgXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gICAgYW5pbWF0aW9uczogW09wYWNpdHlBbmltYXRpb24sIExpc3RBbmltYXRpb25dXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDb2xvclByZXNldFN1Ymxpc3QgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBwdWJsaWMgbGlzdDogQXJyYXk8Q29sb3I+O1xyXG5cclxuICAgIEBPdXRwdXQoKVxyXG4gICAgcHVibGljIHNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Q29sb3I+KGZhbHNlKTtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgcHVibGljIGRpcmVjdGlvbjogJ2Rvd24nIHwgJ3VwJyB8ICdsZWZ0JyB8ICdyaWdodCcgPSAndXAnO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBwdWJsaWMgYWN0aXZlQ29sb3I6IENvbG9yO1xyXG5cclxuICAgIHB1YmxpYyBzaG93Q2hpbGRyZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGhvb2tzOiBBcnJheTxGdW5jdGlvbj4gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSByZWFkb25seSBkb2N1bWVudCxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLmNkci5kZXRhY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUxpc3RlbmVycygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhvb2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjaygpKTtcclxuICAgICAgICB0aGlzLmhvb2tzLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBlbWl0IGNvbG9yIGNoYW5nZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2UoY29sb3I6IENvbG9yKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UubmV4dChjb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uTG9uZ1ByZXNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbkRvY3VtZW50Q2xpY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxpc3RlbkRvY3VtZW50Q2xpY2soKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ob29rcy5wdXNoKHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMuZG9jdW1lbnQsICdtb3VzZWRvd24nLCAoKSA9PiB0aGlzLmNsb3NlTGlzdCgpKSk7XHJcbiAgICAgICAgdGhpcy5ob29rcy5wdXNoKHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMuZG9jdW1lbnQsICd0b3VjaHN0YXJ0JywgKCkgPT4gdGhpcy5jbG9zZUxpc3QoKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VMaXN0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGlsZHJlbikge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzc05hbWUnKVxyXG4gICAgcHVibGljIGdldCBjbGFzc05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYGRpcmVjdGlvbi0ke3RoaXMuZGlyZWN0aW9ufWA7XHJcbiAgICB9XHJcbn0iXX0=