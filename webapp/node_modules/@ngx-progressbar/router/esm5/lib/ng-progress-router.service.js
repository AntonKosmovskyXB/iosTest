/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable, Optional, Inject } from '@angular/core';
import { Router, NavigationStart, NavigationEnd, NavigationCancel, NavigationError } from '@angular/router';
import { of } from 'rxjs';
import { tap, delay, switchMap, filter } from 'rxjs/operators';
import { NgProgress } from '@ngx-progressbar/core';
import { NG_PROGRESS_ROUTER_CONFIG } from './ng-progress-router.interface';
import * as i0 from "@angular/core";
import * as i1 from "@ngx-progressbar/core";
import * as i2 from "@angular/router";
import * as i3 from "./ng-progress-router.interface";
/**
 * Check if a router event type exists in an array of router event types
 * @param {?} routerEvent
 * @param {?} events
 * @return {?}
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@ngx-progressbar/core';
import * as ɵngcc2 from '@angular/router';
function eventExists(routerEvent, events) {
    /** @type {?} */
    var res = false;
    events.map((/**
     * @param {?} event
     * @return {?}
     */
    function (event) { return res = res || routerEvent instanceof event; }));
    return res;
}
var NgProgressRouter = /** @class */ (function () {
    function NgProgressRouter(progress, router, config) {
        var _this = this;
        this._config = {
            id: 'root',
            delay: 0,
            startEvents: [NavigationStart],
            completeEvents: [NavigationEnd, NavigationCancel, NavigationError]
        };
        this._config = config ? tslib_1.__assign({}, this._config, config) : this._config;
        /** @type {?} */
        var progressRef = progress.ref(this._config.id);
        /** @type {?} */
        var startProgress = of({}).pipe(tap((/**
         * @return {?}
         */
        function () { return progressRef.start(); })));
        /** @type {?} */
        var completeProgress = of({}).pipe(delay(this._config.delay), tap((/**
         * @return {?}
         */
        function () { return progressRef.complete(); })));
        /** @type {?} */
        var filterEvents = tslib_1.__spread(this._config.startEvents, this._config.completeEvents);
        router.events.pipe(filter((/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return eventExists(event, filterEvents); })), switchMap((/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return eventExists(event, _this._config.startEvents) ? startProgress : completeProgress; }))).subscribe();
    }
    /** @nocollapse */
    NgProgressRouter.ctorParameters = function () { return [
        { type: NgProgress },
        { type: Router },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NG_PROGRESS_ROUTER_CONFIG,] }] }
    ]; };
    /** @nocollapse */ NgProgressRouter.ngInjectableDef = i0.defineInjectable({ factory: function NgProgressRouter_Factory() { return new NgProgressRouter(i0.inject(i1.NgProgress), i0.inject(i2.Router), i0.inject(i3.NG_PROGRESS_ROUTER_CONFIG, 8)); }, token: NgProgressRouter, providedIn: "root" });
NgProgressRouter.ɵfac = function NgProgressRouter_Factory(t) { return new (t || NgProgressRouter)(ɵngcc0.ɵɵinject(ɵngcc1.NgProgress), ɵngcc0.ɵɵinject(ɵngcc2.Router), ɵngcc0.ɵɵinject(NG_PROGRESS_ROUTER_CONFIG, 8)); };
NgProgressRouter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NgProgressRouter, factory: function (t) { return NgProgressRouter.ɵfac(t); }, providedIn: 'root' });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgProgressRouter, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: ɵngcc1.NgProgress }, { type: ɵngcc2.Router }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [NG_PROGRESS_ROUTER_CONFIG]
            }] }]; }, null); })();
    return NgProgressRouter;
}());
export { NgProgressRouter };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NgProgressRouter.prototype._config;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcHJvZ3Jlc3Mtcm91dGVyLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIm5nOi9Abmd4LXByb2dyZXNzYmFyL3JvdXRlci9saWIvbmctcHJvZ3Jlc3Mtcm91dGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQVEsTUFBTSxlQUFlLENBQUM7QUFDbkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBZSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pILE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUIsT0FBTyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNuRCxPQUFPLEVBQTBCLHlCQUF5QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDbkc7QUFFZ0M7QUFDNUI7QUFHSjtBQUFzRDtBQUFJO0FBRXhCO0FBQTBCO0FBQXFCO0FBQ3hFOzs7O0FBSFQsU0FBUyxXQUFXLENBQUMsV0FBd0IsRUFBRSxNQUEyQjtBQUMxRTtBQUNFLFFBREksR0FBRyxHQUFHLEtBQUs7QUFDakIsSUFBRSxNQUFNLENBQUMsR0FBRztBQUFNO0FBQXdCO0FBQW1CO0FBQVEsSUFBeEQsVUFBQyxLQUF3QixJQUFLLE9BQUEsR0FBRyxHQUFHLEdBQUcsSUFBSSxXQUFXLFlBQVksS0FBSyxFQUF6QyxDQUF5QyxFQUFDLENBQUM7QUFDdEYsSUFBRSxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRDtBQUdjLElBUVosMEJBQVksUUFBb0IsRUFBRSxNQUFjLEVBQWlELE1BQThCO0FBQ2pJLFFBREUsaUJBbUJDO0FBQ0gsUUEzQm1CLFlBQU8sR0FBMkI7QUFDckQsWUFB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LEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFXQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBbUJBLEFBMUJBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUE5QkEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQWhCQSxBQUFBLEFBSEEsQUFBQSxBQTRCQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUE3QkEsQUFpREEsQUEvQkEsQUErQkEsQUE1QkEsQUFBQSxBQUNBLEFBS0EiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBPcHRpb25hbCwgSW5qZWN0LCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlciwgTmF2aWdhdGlvblN0YXJ0LCBOYXZpZ2F0aW9uRW5kLCBOYXZpZ2F0aW9uQ2FuY2VsLCBOYXZpZ2F0aW9uRXJyb3IsIFJvdXRlckV2ZW50IH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFwLCBkZWxheSwgc3dpdGNoTWFwLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IE5nUHJvZ3Jlc3MgfSBmcm9tICdAbmd4LXByb2dyZXNzYmFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOZ1Byb2dyZXNzUm91dGVyQ29uZmlnLCBOR19QUk9HUkVTU19ST1VURVJfQ09ORklHIH0gZnJvbSAnLi9uZy1wcm9ncmVzcy1yb3V0ZXIuaW50ZXJmYWNlJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIHJvdXRlciBldmVudCB0eXBlIGV4aXN0cyBpbiBhbiBhcnJheSBvZiByb3V0ZXIgZXZlbnQgdHlwZXNcclxuICogQHBhcmFtIHJvdXRlckV2ZW50XHJcbiAqIEBwYXJhbSBldmVudHNcclxuICovXHJcbmZ1bmN0aW9uIGV2ZW50RXhpc3RzKHJvdXRlckV2ZW50OiBSb3V0ZXJFdmVudCwgZXZlbnRzOiBUeXBlPFJvdXRlckV2ZW50PltdKSB7XHJcbiAgbGV0IHJlcyA9IGZhbHNlO1xyXG4gIGV2ZW50cy5tYXAoKGV2ZW50OiBUeXBlPFJvdXRlckV2ZW50PikgPT4gcmVzID0gcmVzIHx8IHJvdXRlckV2ZW50IGluc3RhbmNlb2YgZXZlbnQpO1xyXG4gIHJldHVybiByZXM7XHJcbn1cclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIE5nUHJvZ3Jlc3NSb3V0ZXIge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgX2NvbmZpZzogTmdQcm9ncmVzc1JvdXRlckNvbmZpZyA9IHtcclxuICAgIGlkOiAncm9vdCcsXHJcbiAgICBkZWxheTogMCxcclxuICAgIHN0YXJ0RXZlbnRzOiBbTmF2aWdhdGlvblN0YXJ0XSxcclxuICAgIGNvbXBsZXRlRXZlbnRzOiBbTmF2aWdhdGlvbkVuZCwgTmF2aWdhdGlvbkNhbmNlbCwgTmF2aWdhdGlvbkVycm9yXVxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2dyZXNzOiBOZ1Byb2dyZXNzLCByb3V0ZXI6IFJvdXRlciwgQE9wdGlvbmFsKCkgQEluamVjdChOR19QUk9HUkVTU19ST1VURVJfQ09ORklHKSBjb25maWc6IE5nUHJvZ3Jlc3NSb3V0ZXJDb25maWcpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZyA/IHsuLi50aGlzLl9jb25maWcsIC4uLmNvbmZpZ30gOiB0aGlzLl9jb25maWc7XHJcbiAgICBjb25zdCBwcm9ncmVzc1JlZiA9IHByb2dyZXNzLnJlZih0aGlzLl9jb25maWcuaWQpO1xyXG5cclxuICAgIGNvbnN0IHN0YXJ0UHJvZ3Jlc3MgPSBvZih7fSkucGlwZShcclxuICAgICAgdGFwKCgpID0+IHByb2dyZXNzUmVmLnN0YXJ0KCkpXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGNvbXBsZXRlUHJvZ3Jlc3MgPSBvZih7fSkucGlwZShcclxuICAgICAgZGVsYXkodGhpcy5fY29uZmlnLmRlbGF5KSxcclxuICAgICAgdGFwKCgpID0+IHByb2dyZXNzUmVmLmNvbXBsZXRlKCkpXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGZpbHRlckV2ZW50cyA9IFsuLi50aGlzLl9jb25maWcuc3RhcnRFdmVudHMsIC4uLnRoaXMuX2NvbmZpZy5jb21wbGV0ZUV2ZW50c107XHJcblxyXG4gICAgcm91dGVyLmV2ZW50cy5waXBlKFxyXG4gICAgICBmaWx0ZXIoKGV2ZW50OiBSb3V0ZXJFdmVudCkgPT4gZXZlbnRFeGlzdHMoZXZlbnQsIGZpbHRlckV2ZW50cykpLFxyXG4gICAgICBzd2l0Y2hNYXAoKGV2ZW50OiBSb3V0ZXJFdmVudCkgPT4gZXZlbnRFeGlzdHMoZXZlbnQsIHRoaXMuX2NvbmZpZy5zdGFydEV2ZW50cykgPyBzdGFydFByb2dyZXNzIDogY29tcGxldGVQcm9ncmVzcylcclxuICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==